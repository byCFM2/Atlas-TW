-- Stratholme.lua - Данные предметов из Стратхольма
-- Модульная структура данных для Atlas-TW

local _G = getfenv()
AtlasTW = _G.AtlasTW or {}
local L = AtlasTW.Local
local BZ = AceLibrary("Babble-Zone-2.2a")
local BF = AceLibrary("Babble-Faction-2.2a")
local BB = AceLibrary("Babble-Boss-2.2a")
local BIS = AceLibrary("Babble-ItemSet-2.2a")

AtlasTW.InstanceData = AtlasTW.InstanceData or {}

-- Данные Стратхольма
AtlasTW.InstanceData.Stratholme = {
    Name = BZ["Stratholme"],
    Location = BZ["Eastern Plaguelands"],
    Level = {45,60},
    Acronym = "Strat",
    MaxPlayers = 10,
    DamageType = L["Physical"],
    Entrances = {
        { letter = "A) " .. L["Front"] },
        { letter = "B) " .. L["Side"] }
    },
    Reputation = {
        { name = BF["Argent Dawn"], loot = "ArgentDawn" }
    },
    Keys = {
        { name = L["The Scarlet Key"], loot = "VanillaKeys", info = L["Living Side"] },
        { name = L["Key to the City"], loot = "VanillaKeys", info = L["Undead Side"] },
        { name = L["Brazier of Invocation"], loot = "VanillaKeys", info = L["Tier 0.5 Summon"] },
    },
    Bosses = {
        {
            id = "STRATSkull",
            prefix = "1)",
            name = BB["Skul"],
            postfix = L["Rare"]..", "..L["Varies"],
            defaults = { dropRate = 33 },
            loot = {
                {id=13394},
                {id=13395},
                {},
                {id=13396},
                {},
                {id=70226, disc=L["Quest Item"],dropRate=1},
            }
        },
        {
            id = "STRATStratholmeCourier",
            name = L["Stratholme Courier"],
            defaults = { dropRate = 50 },
            loot = {
                {id=13302},
                {id=13303},
                {id=13304},
                {id=13305},
                {id=13306},
                {id=13307},
            }
        },
        {
            id = "STRATFrasSiabi",
            name = L["Fras Siabi"],
            loot = {
                {id=13171, dropRate=100},
            }
        },
        {
            id = "STRATAtiesh",
            prefix = "2)",
            name = BB["Rethilgore"],
            postfix = L["Summon"],
            loot = {
                {id=22736, dropRate=100},
            }
        },
        {
            id = "STRATBalzaphon",
            name = BB["Balzaphon"],
            postfix = L["Scourge Invasion"],
            defaults = { dropRate = 33 },
            loot = {
                {id=23125},
                {id=23126},
                {},
                {id=23124},
            }
        },
        {
            id = "STRATHearthsingerForresten",
            prefix = "3)",
            name = BB["Hearthsinger Forresten"],
            postfix = L["Rare"]..", "..L["Varies"],
            defaults = { dropRate = 20 },
            loot = {
                {id=16682, disc=L["Mage"]..", T0", container={22064}},
                {},
                {id=13378},
                {id=13384},
                {id=13383},
                {id=13379},
                {},
                {id=70226, disc=L["Quest Item"],dropRate=1},
            }
        },
        {
            id = "STRATTheUnforgiven",
            prefix = "4)",
            name = BB["The Unforgiven"],
            defaults = { dropRate = 20 },
            loot = {
                {id=16717, disc=L["Druid"]..", T0", container={22110}},
                {},
                {id=13404},
                {id=13405},
                {id=13409},
                {},
                {id=13408},
                {},
                {id=70226, disc=L["Quest Item"],dropRate=1},
                {},
                {id=51217, disc=L["Transmogrification"], dropRate=5},
            }
        },
        {
            prefix = "5)",
            name = L["Elder Farwhisper"],
            postfix = L["Lunar Festival"],
            items = "LunarFestival",
        },
        {
            id = "STRATTimmytheCruel",
            prefix = "6)",
            name = BB["Timmy the Cruel"],
            defaults = { dropRate = 20 },
            loot = {
                {id=16724, disc=L["Paladin"]..", T0", container={22090}},
                {},
                {id=13400},
                {id=13403},
                {id=13402},
                {id=13401},
                {},
                {id=61791, dropRate=.25, container={61784}},
                {},
                {id=70226, disc=L["Quest Item"],dropRate=1},
                {},
                {id=51217, disc=L["Transmogrification"], dropRate=5},
            }
        },
        {
            id = "STRATMalor",
            prefix = "7)",
            name = BB["Malor the Zealous"],
            defaults = { dropRate = 11 },
            loot = {
                {id=81016},
                {id=81017},
                {id=81019},
                {id=81122},
                {id=81123},
                {id=81124},
                {id=81131},
                {},
                {id=81018},
                {id=81125},
                {},
                {id=83575, disc=L["Book"], dropRate=10},
                {},
                {id=61791, dropRate=.25, container={61784}},
                {},
                {id=70226, disc=L["Quest Item"],dropRate=1},
                {},
                {id=51217, disc=L["Transmogrification"], dropRate=5},
            }
        },
        {
            id = "STRATMalorsStrongbox",
            name = L["Malor's Strongbox"],
            loot = {
                { id=12845, disc=L["Quest Item"], dropRate=100 },
            }
        },
        {
            id = "STRATCrimsonHammersmith",
            prefix = "8)",
            name = L["Crimson Hammersmith"],
            postfix = L["Summon"],
            loot = {
                {id=18781, dropRate=40},
                {id=12726, container={12619}},
                {},
                {id=12824, container={12776}},
            }
        },
        {
            id = "STRATBSPlansSerenity",
            name = L["Blacksmithing Plans"],
            loot = {
                {id=12827, dropRate=.02, container={12781}},
            }
        },
        {
            id = "STRATCannonMasterWilley",
            prefix = "9)",
            name = BB["Cannon Master Willey"],
            defaults = { dropRate = 10 },
            loot = {
                {id=16708, disc=L["Rogue"]..", T0", container={22008}},
                {},
                {id=22407},
                {id=22403},
                {id=22405},
                {id=18721},
                {id=13381},
                {id=13382},
                {},
                {id=13380},
                {id=22404},
                {id=22406},
                {},
                {id=13377, dropRate=100},
                {},
                {id=12839, dropRate=6, container={12783}},
                {id=61791, dropRate=.25, container={61784}},
                {},
                {id=70226, disc=L["Quest Item"],dropRate=1},
                {},
                {id=51217, disc=L["Transmogrification"], dropRate=5},
            }
        },
        {
            id = "STRATArchivistGalford",
            prefix = "10)",
            name = BB["Archivist Galford"],
            defaults = { dropRate = 20 },
            loot = {
                {id=16692, disc=L["Priest"]..", T0", container={22081}},
                {},
                {id=13386},
                {id=13387},
                {id=18716},
                {id=13385},
                {},
                {id=12811, disc=L["Trade Goods"], dropRate=18},
                {},
                {id=22897, disc=L["Book"], dropRate=14},
                {id=61791, dropRate=.25, container={61784}},
                {},
                {id=70226, disc=L["Quest Item"],dropRate=1},
                {},
                {id=51217, disc=L["Transmogrification"], dropRate=5},
            }
        },
        {
            id = "STRATDathrohan",
            prefix = "11)",
            name = L["Grand Crusader Dathrohan"],
            color = "|cff9d9d9d",
        },
        {
            id = "STRATBalnazzar",
            name = BB["Balnazzar"],
            defaults = { dropRate = 10 },
            loot = {
                {id=16725, disc=L["Paladin"]..", T0", container={22087}},
                {},
                {id=13359},
                {id=18718},
                {id=12103},
                {id=18720},
                {id=13358},
                {id=13369},
                {},--weapon
                {id=13348},
                {id=18717},
                {id=13360},
                {},
                {},
                {id=13353, dropRate=1.37},
                {id=83501, dropRate=17, container={60288}},
                {id=83502, dropRate=17, container={60289}},
                {id=83503, dropRate=17, container={60290}},
                {id=83504, dropRate=17, container={60291}},
                {id=83505, dropRate=17, container={60292}},
                {id=83506, dropRate=17, container={60287}},
                {id=83500, dropRate=5, container={60293}},
                {id=14512, dropRate=6, container={14154}},
                {id=13520, dropRate=3, container={13511}},
                {id=61791, dropRate=.25, container={61784}},
                {id=13250},
                {},
                {id=70226, disc=L["Quest Item"],dropRate=3,container={70227,70228,70229,70230,70231,70232,70233,
                    70234,70235,70236,70238}},
                {id=41700,dropRate=100,container={41704}},
                {id=51217, disc=L["Transmogrification"], dropRate=100},
            }
        },
        {
            id = "STRATSothosJarien",
            name = BB["Sothos"].." & "..BB["Jarien"],
            postfix = L["Summon"],
            defaults = { dropRate = 20 },
            loot = {
                {id=22327},
                {id=22301},
                {id=22328},
                {},
                {id=22334},
                {},
                {id=22329},
            }
        },
        {
            id = "STRATMagistrateBarthilas",
            prefix = "12)",
            name = BB["Magistrate Barthilas"],
            postfix = L["Varies"],
            defaults = { dropRate = 17 },
            loot = {
                {id=18727},
                {id=13376},
                {id=18726},
                {id=18722},
                {},
                {id=23198},
                {},
                {id=18725},
                {},
                {id=12382, disc=L["Key"], dropRate=100},
                {},
                {id=70226, disc=L["Quest Item"],dropRate=1},
                {},
                {id=51217, disc=L["Transmogrification"], dropRate=5},
            }
        },
        {
            prefix = "13)",
            name = L["Aurius"],
            color = "|cff9d9d9d",
        },
        {
            id = "STRATStonespine",
            prefix = "14)",
            name = BB["Stonespine"],
            postfix = L["Rare"] ..", ".. L["Wanders"],
            defaults = { dropRate = 33 },
            loot = {
                {id=13397},
                {id=13954},
                {},
                {id=13399},
                {},
                {id=70226, disc=L["Quest Item"],dropRate=1},
            }
        },
        {
            id = "STRATBaronessAnastari",
            prefix = "15)",
            name = BB["Baroness Anastari"],
            defaults = { dropRate = 20 },
            loot = {
                {id=16704, disc=L["Warlock"]..", T0", container={22076}},
                {},
                {id=18728},
                {id=18730},
                {id=18729},
                {id=13534},
                {},
                {id=13538},
                {id=13535},
                {id=13537},
                {id=13539},
                {id=13514},
                {},
                {id=61791, dropRate=.25, container={61784}},
                {},
                {id=70226, disc=L["Quest Item"],dropRate=1},
                {},
                {id=51217, disc=L["Transmogrification"], dropRate=5},
            }
        },
        {
            id = "STRATBlackGuardSwordsmith",
            name = L["Black Guard Swordsmith"],
            postfix = L["Summon"],
            loot = {
                {id=18783, dropRate=40},
                {id=12725, container={12620}},
                {},
                {id=12825, container={12777}},
            }
        },
        {
            id = "STRATBSPlansCorruption",
            name = L["Blacksmithing Plans"],
            loot = {
                {id=12830, dropRate=.02, container={12782}},
            }
        },
        {
            id = "STRATNerubenkan",
            prefix = "16)",
            name = BB["Nerub'enkan"],
            defaults = { dropRate = 20 },
            loot = {
                {id=16675, disc=L["Hunter"]..", T0", container={22061}},
                {},
                {id=18740},
                {id=18739},
                {},
                {id=18738},
                {id=13529},
                {},
                {id=13533},
                {id=13532},
                {id=13531},
                {id=13530},
                {id=13508},
                {},
                {id=61791, dropRate=.25, container={61784}},
                {id=70226, disc=L["Quest Item"],dropRate=1},
                {},
                {id=51217, disc=L["Transmogrification"], dropRate=5},
            }
        },
        {
            id = "STRATMalekithePallid",
            prefix = "17)",
            name = BB["Maleki the Pallid"],
            defaults = { dropRate = 20 },
            loot = {
                {id=16691, disc=L["Priest"]..", T0", container={22084}},
                {},
                {id=18734},
                {id=18735},
                {id=13524},
                {},
                {id=18737},
                {},
                {id=13528},
                {id=13525},
                {id=13526},
                {id=13527},
                {id=13509},
                {},
                {id=12833, dropRate=6, container={12796}},
                {id=61791, dropRate=.25, container={61784}},
                {},
                {id=70226, disc=L["Quest Item"],dropRate=1},
                {},
                {id=51217, disc=L["Transmogrification"], dropRate=5},
            }
        },
        {
            id = "STRATRamsteintheGorger",
            prefix = "18)",
            name = BB["Ramstein the Gorger"],
            defaults = { dropRate = 14 },
            loot = {
                {id=16737, disc=L["Warrior"]..", T0", container={21998}},
                {},
                {id=18723},
                {id=13374},
                {id=13373},
                {id=13515},
                {},
                {id=13375},
                {id=13372},
                {},
                {id=61791, dropRate=.25, container={61784}},
                {},
                {id=70226, disc=L["Quest Item"],dropRate=1},
                {},
                {id=51217, disc=L["Transmogrification"], dropRate=5},
            }
        },
        {
            id = "STRATBaronRivendare",
            prefix = "19)",
            name = BB["Baron Rivendare"],
            defaults = { dropRate = 11 },
            loot = {
                {id=13335, dropRate=0.02},
                {id=13505, dropRate=1},
                {},
                {id=22411, dropRate=20},
                {id=22412, dropRate=20},
                {id=13340, dropRate=14},
                {id=13346, dropRate=14},
                {id=22409, dropRate=20},
                {id=13344, dropRate=14},
                {id=22410, dropRate=20},
                {id=13345, dropRate=14},
                {id=22408, dropRate=20},
                {id=13349, dropRate=14},
                {id=13368, dropRate=14},
                {id=13361, dropRate=14},
                {id=16694, disc=L["Priest"]..", T0", container={22085}},
                {id=16687, disc=L["Mage"]..", T0", container={22067}},
                {id=16699, disc=L["Warlock"]..", T0", container={22072}},
                {id=16709, disc=L["Rogue"]..", T0", container={22007}},
                {id=16719, disc=L["Druid"]..", T0", container={22111}},
                {id=16678, disc=L["Hunter"]..", T0", container={22017}},
                {id=16668, disc=L["Shaman"]..", T0", container={22100}},
                {id=16728, disc=L["Paladin"]..", T0", container={22092}},
                {id=16732, disc=L["Warrior"]..", T0", container={22000}},
                {},
                {id=61791, dropRate=.25, container={61784}},
                {},
                {id=70226, disc=L["Quest Item"],dropRate=3,container={70227,70228,70229,70230,70231,70232,70233,
                    70234,70235,70236,70238}},
                {id=41700,dropRate=100,container={41704}},
                {},
                {id=51217, disc=L["Transmogrification"], dropRate=100},
            }
        },
        { name = L["Ysida Harmon"], color = "|cff9d9d9d"},
        { prefix = "1')",name = L["Crusaders' Square Postbox"], color = "|cff00FF00"},
        { prefix = "2')",name = L["Market Row Postbox"], color = "|cff00FF00"},
        { prefix = "3')",name = L["Festival Lane Postbox"], color = "|cff00FF00"},
        { prefix = "4')",name = L["Elders' Square Postbox"], color = "|cff00FF00"},
        { prefix = "5')",name = L["King's Square Postbox"], color = "|cff00FF00"},
        { prefix = "6')",name = L["Fras Siabi's Postbox"], color = "|cff00FF00"},
        {
            id = "STRATPostmaster",
            name = L["Third Postbox Opened"].. ": " .. BB["Postmaster Malown"],
            defaults = { dropRate = 17 },
            loot = {
                {id=13390, dropRate=17},
                {id=13388, dropRate=17},
                {id=13389, dropRate=17},
                {id=13391, dropRate=17},
                {id=13392, dropRate=17},
                {},
                {id=13393, dropRate=17},
            },
        },
        {
            id = "STRATTrash",
            name = L["Trash Mobs"],
            defaults = { dropRate = 2 },
            loot = {
                {id=16697, disc=L["Priest"]..", T0", container={22079}},
                {id=16685, disc=L["Mage"]..", T0", container={22062}},
                {id=16702, disc=L["Warlock"]..", T0", dropRate=1, container={22070}},
                {id=16710, disc=L["Rogue"]..", T0", container={22004}},
                {id=16714, disc=L["Druid"]..", T0", dropRate=1.7, container={22108}},
                {id=16681, disc=L["Hunter"]..", T0", dropRate=1.7, container={22011}},
                {id=16671, disc=L["Shaman"]..", T0", container={22095}},
                {id=16723, disc=L["Paladin"]..", T0", dropRate=1, container={22086}},
                {id=16736, disc=L["Warrior"]..", T0", container={21994}},
                {},
                {id=12811, disc=L["Reagent"], dropRate=5},
                {id=12735, dropRate=15},
                {id=12843},
                {id=12841},
                {id=12840},
                {id=70163, dropRate=3, container={56016}},
                {id=18742, dropRate=.02},
                {id=18743, dropRate=.1},
                {id=17061, dropRate=.02},
                {id=18741, dropRate=.02},
                {id=18744, dropRate=.02},
                {id=18745, dropRate=.02},
                {id=18736, dropRate=.02},
                {id=16249},
                {id=16248, dropRate=.88},
                {id=14495, container={14144}},
                {id=15777, container={15096}, dropRate=.99},
                {id=15768, container={15088}},
                {id=18658, container={18639}, dropRate=4},
                {id=16052, container={16009}, dropRate=5},
                {id=56026, container={55259}, dropRate=.08},
            }
        },
        { name = BIS["Ironweave Battlesuit"], items = "Ironweave" },
        { name = BIS["The Postmaster"], items = "Strat" },
        { name = L["Tier 0/0.5 Sets"], items = "AtlasLootT0SetMenu" },
    },
}

-- Инициализация предметов для всех боссов
for _, bossData in ipairs(AtlasTW.InstanceData.Stratholme.Bosses) do
    bossData.items = bossData.items or AtlasTW.CreateItemsFromLootTable(bossData)
    bossData.loot = nil -- Очищаем временные данные
end